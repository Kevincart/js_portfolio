<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
  <input type="file" accept="text/plain" onchange="openFile(event)"><br>
  <form class="search-form" onsubmit="return false">
    <input class="search" type="text" maxlength="4" placeholder="Enter four letters" />
    <input type="submit" />
  </form>
  <script>
    // Four Letters in Common
    // Summer of Tech Code challenge
    // Solution by Kevin Cartwright, 2017

    // Global variable definitions
    var dict;
    var text;

    // FileReader function, reads dictionary file, returns 'dict' string
    var openFile = function(event) {
      var input = event.target;
      var reader = new FileReader();
      reader.onload = function(){
        dict = reader.result;
        return dict;
      };
      reader.readAsText(input.files[0]);
    };

    // Converts 'dict' string into array, then searches with supplied regex
    function searchDict(regex, dict) {
      darray = dict.split("\n");
      console.log(regex);
      var output = dict.match(regex);
      console.log(output);
      //console.log(dict.substring(0, 200));
    }

    // Build regex to search
    function buildRegex(e){
      searchTerm = e.target.value;
      regex = new RegExp(searchTerm, 'gi');
      searchDict(regex, dict);
    }

    // Get search form element, assign event listener
    const searchInput = document.querySelector('.search-form');
    searchInput.addEventListener('change', buildRegex);

  </script>
</body>
</html>
