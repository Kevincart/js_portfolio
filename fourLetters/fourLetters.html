<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    html {
      background-color: LightSlateGray;
      color: white;
      font-family: 'helvetica neue';
    }
  </style>
</head>
<body>
  <h1>Summer of Tech Coding Challenge</h1>
  <h2>Kevin Cartwright's Solution</h2>
  <p>First select the dictionary file.</p>
  <input type="file" accept="text/plain" onchange="openFile(event)"><br>
  <p> Then input the characters you'd like to search on.</p>
  <form class="search-form" onsubmit="return false">
    <input class="search" type="text" maxlength="4" placeholder="Enter four letters" />
    <input type="submit" />
  </form>
  <ul class="list"></ul>
  <script>
    // Four Letters in Common
    // Summer of Tech Code challenge
    // Solution by Kevin Cartwright, 2017

    // Global variable definitions
    var dict;
    var text;
    var list = document.querySelector('.list');

    // FileReader function, reads dictionary file, returns 'dict' string
    var openFile = function(event) {
      var input = event.target;
      var reader = new FileReader();
      reader.onload = function(){
        dict = reader.result;
        return dict;
      };
      reader.readAsText(input.files[0]);
    };

    // Converts 'dict' string into array, then filters by supplied regex
    function searchDict(regex, dict) {
      darray = dict.split("\n");
      console.log(regex);

      var output = darray.filter(function(word){
        return word.match(regex);
      });
      list.innerHTML = output;
      console.log(output);

    }

    // Build regex to search
    function buildRegex(e){
      searchTerm = e.target.value;
      regex = new RegExp(searchTerm, 'gi');
      searchDict(regex, dict);
    }

    // Get search form element, assign event listener
    const searchInput = document.querySelector('.search-form');
    searchInput.addEventListener('change', buildRegex);

  </script>
</body>
</html>
